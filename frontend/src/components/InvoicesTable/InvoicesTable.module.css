/* frontend/src/components/InvoicesTable/InvoicesTable.module.css */

/* ───────────────────────────── */
/* Grid layout (2 month cards/row) */
/* ───────────────────────────── */

.monthGrid {
  display: grid;
  gap: 16px;
}

/* 1 column by default (mobile) */
@media (min-width: 768px) {
  .monthGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* ───────────────────────────── */
/* Card & layout                 */
/* ───────────────────────────── */

.card {
  overflow: hidden;
  border-radius: 14px;
  background: var(--background);
}

.inner {
  padding: 12px 14px;
  transition: padding 0.15s ease;
}

/* Open: normal breathing room */
:global([data-state="open"]) .inner {
  padding-bottom: 14px;
}

/* Closed: compact summary */
:global([data-state="closed"]) .inner {
  padding-bottom: 8px;
}

/* ───────────────────────────── */
/* Loading                       */
/* ───────────────────────────── */

.loading {
  font-size: 15px;
  font-weight: 500;
  color: var(--muted-foreground);
  text-align: center;
  padding: 36px 0;
}

/* ───────────────────────────── */
/* Month header layout           */
/* ───────────────────────────── */

.monthHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;

  /* ✅ prevent overflow on mobile */
  flex-wrap: wrap;
}

/* Stack month / badge / total vertically */
.monthHeaderStack {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

/* Closed state: more breathing room + nicer rhythm */
:global([data-state="closed"]) .monthHeaderStack {
  padding-left: 6px;
  gap: 16px;
}

:global([data-state="closed"]) .monthHeader {
  align-items: center;
}

/* Actions: stacked, full-width on mobile; row on desktop */
.monthHeaderActions {
  display: flex;
  flex-direction: column;   /* ⬅️ stack vertically */
  align-items: stretch;     /* ⬅️ full-width buttons */
  gap: 40px;
}

.monthHeaderActions :global(button):first-child {
  background-color: var(--primary);
  color: var(--primary-foreground);
  border-color: var(--primary);
}

.monthHeaderActions :global(button):first-child:hover {
  background-color: color-mix(in oklab, var(--primary) 90%, black);
  border-color: color-mix(in oklab, var(--primary) 90%, black);
}


@media (min-width: 640px) {
 .monthHeaderActions {
  display: flex;
  flex-direction: column;   /* ⬅️ stack vertically */
  align-items: stretch;     /* ⬅️ full-width buttons */
  gap: 40px;
}
}

.monthHeaderActions :global(button):first-child {
  background-color: var(--primary);
  color: var(--primary-foreground);
  border-color: var(--primary);
}

.monthHeaderActions :global(button):first-child:hover {
  background-color: color-mix(in oklab, var(--primary) 90%, black);
  border-color: color-mix(in oklab, var(--primary) 90%, black);
}

@media (min-width: 640px) {
  .monthHeaderActions :global(button) {
    width: auto;
  }
}

/* Primary first button styling */
.monthHeaderActions :global(button):first-child {
  background-color: var(--primary);
  color: var(--primary-foreground);
  border-color: var(--primary);
}

.monthHeaderActions :global(button):first-child:hover {
  background-color: color-mix(in oklab, var(--primary) 90%, black);
  border-color: color-mix(in oklab, var(--primary) 90%, black);
}

/* Download popover */
.downloadPopover {
  width: 280px;
  max-width: 92vw; /* ✅ fit on mobile */
}

.downloadTitle {
  font-size: 13px;
  font-weight: 650;
  color: var(--foreground);
  margin-bottom: 10px;
}

.progressWrap {
  display: grid;
  gap: 6px;
}

.progressTrack {
  height: 8px;
  border-radius: 999px;
  overflow: hidden;
  background: color-mix(in oklab, var(--foreground) 8%, transparent);
  border: 1px solid color-mix(in oklab, var(--foreground) 10%, transparent);
}

.progressBar {
  height: 100%;
  width: 8%;
  border-radius: 999px;
  background: var(--primary);
  transition: width 0.12s ease;
}

/* Indeterminate animation when Content-Length not provided */
.progressIndeterminate {
  width: 40%;
  animation: progress-indeterminate 1s ease-in-out infinite;
}

@keyframes progress-indeterminate {
  0% {
    transform: translateX(-60%);
  }
  50% {
    transform: translateX(60%);
  }
  100% {
    transform: translateX(-60%);
  }
}

.progressMeta {
  font-size: 12px;
  color: var(--muted-foreground);
}

.monthTotal {
  font-size: 13px;
  font-weight: 500;
  color: var(--muted-foreground);
  white-space: nowrap;
}

/* ───────────────────────────── */
/* Table container               */
/* ───────────────────────────── */

.tableWrap {
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--background);

  /* ✅ allow horizontal scroll if needed on very small screens */
  max-width: 100%;
}

/* You can add this wrapper in JSX if needed:
   <div className={styles.tableScroll}><Table .../></div>
*/
.tableScroll {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* ───────────────────────────── */
/* Table header                  */
/* ───────────────────────────── */

.tableWrap :global(thead th) {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--muted-foreground);

  background: color-mix(in oklab, var(--foreground) 2.5%, transparent);

  padding-top: 10px;
  padding-bottom: 10px;

  border-bottom: 1px solid color-mix(in oklab, var(--foreground) 8%, transparent);
}

/* ───────────────────────────── */
/* Table cells                   */
/* ───────────────────────────── */

.tableWrap :global(td) {
  font-size: 14px;
  font-weight: 500;
  color: var(--foreground);
  padding-top: 12px;
  padding-bottom: 12px;
  vertical-align: middle;

  border-bottom: 1px solid color-mix(in oklab, var(--foreground) 6%, transparent);
}

.tableWrap :global(tbody tr:last-child td) {
  border-bottom: none;
}

/* Numeric alignment */
.tableWrap :global(td.text-right),
.tableWrap :global(th.text-right) {
  font-variant-numeric: tabular-nums;
}

/* Muted informational cells */
.tableWrap :global(.text-muted-foreground) {
  font-size: 13px;
  font-weight: 500;
  color: var(--muted-foreground);
}

/* Amount emphasis */
.tableWrap :global(td.font-medium) {
  font-weight: 650;
}

/* ───────────────────────────── */
/* Hover / interaction           */
/* ───────────────────────────── */

.tableWrap :global(tbody tr.group) {
  transition: background-color 0.15s ease;
}

.tableWrap :global(tbody tr.group:hover) {
  background-color: color-mix(in oklab, var(--foreground) 4%, transparent);
}

/* ───────────────────────────── */
/* Month title & badge (global)  */
/* ───────────────────────────── */

:global(.month-title) {
  font-size: 18px;
  font-weight: 800;
  letter-spacing: -0.01em;
  color: var(--foreground);
}

:global(.month-badge) {
  font-size: 12px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 999px;

  color: var(--muted-foreground);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--foreground) 3.5%, transparent);
}

/* Slightly softer badge when closed */
:global([data-state="closed"]) :global(.month-badge) {
  padding: 4px 10px;
}

/* ───────────────────────────── */
/* Dropdown / actions            */
/* ───────────────────────────── */

.tableWrap :global(button) {
  font-weight: 500;
}

.tableWrap :global(.text-red-600) {
  font-weight: 650;
}

/* ───────────────────────────── */
/* Mobile compact mode helpers   */
/* ───────────────────────────── */

.supplierCellCompact {
  max-width: 0;
}

.supplierCompactMain {
  font-weight: 650;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.supplierCompactSub {
  margin-top: 2px;
  font-size: 12px;
  line-height: 1.2;
  color: var(--muted-foreground);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ───────────────────────────── */
/* Structure badges (keep colors) */
/* ───────────────────────────── */

.structureBadgeBase {
  font-size: 12px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 999px;

  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--foreground) 3.5%, transparent);
}

.structureBadgePrimary {
  color: oklch(0.70 0.12 183);
}

.structureBadgeSecondary {
  color: oklch(0.71 0.13 215);
}

/* ───────────────────────────── */
/* Mobile tweaks                 */
/* ───────────────────────────── */

@media (max-width: 640px) {
  .inner {
    padding: 12px;
  }

  .tableWrap :global(thead th) {
    font-size: 11px;
    padding-top: 9px;
    padding-bottom: 9px;
  }

  .tableWrap :global(td) {
    font-size: 13px;
    padding-top: 11px;
    padding-bottom: 11px;
  }

  :global(.month-title) {
    font-size: 16px;
  }

  :global(.month-badge) {
    font-size: 11px;
    padding: 2px 9px;
  }

  .monthTotal {
    font-size: 12px;
  }
}
